###### [Home][домой]/циклы

# Тема: Циклы

Когда встает задача сделать однотипное задание много раз.

Например вывести товары из списка лдин за другим. Или просто перебрать все числа от 1 до 10 и для каждого выполнить одинаковый код.

Для многократного повторения одного участка кода используються циклы.

### Цикл "while"

Цикл ```while``` имеет следующий синтаксис:
```javascript
while (condition) {
    // код
    // также называемый "телом цикла"
}
```
Код из цикла выполняеться пока условие ```condition``` истино.

Например код ниже выводи ```i``` пока ```i < 3```
```javascript
let i = 0;
while (i < 3) { // выводит 0, затем 1, затем 2
  alert( i );
  i++;
}
```
Одно выполнение тела цикла по-научному называется итерация. Цикл в примере выше совершает три итерации.

Если бы строка ```i++``` отсутствовала в примере выше, то цикл бы повторялся (в теории) вечно. На практике, конечно, браузер не позволит такому случиться, он предоставит пользователю возможность остановить «подвисший» скрипт, а JavaScript на стороне сервера придётся «убить» процесс.

Любое выражение или переменная может быть условием цикла, а не только сравнение: условие ```while``` вычисляется и преобразуется в логическое значение.

Например, ```while (i)``` – более краткий вариант ```while (i != 0)```:
```javascript
let i = 3;
while (i) { // когда i будет равно 0, условие станет ложным, и цикл остановится
  alert( i );
  i--;
}
```

### Цикл «do…while»

Проверку условия можно разместить под телом цикла, используя специальный синтаксис do..while:

```javascript
do {
  // тело цикла
} while (condition);
```

Цикл сначала выполнит тело, а затем проверит условие condition, и пока его значение равно true, он будет выполняться снова и снова.

Например:

```javascript
let i = 0;
do {
  alert( i );
  i++;
} while (i < 3);
```
Такая форма синтаксиса оправдана, если вы хотите, чтобы тело цикла выполнилось хотя бы один раз, даже если условие окажется ложным. На практике чаще используется форма с предусловием: ```while(…) {…}```.

### Цикл «do…while»

Более сложный, но при этом самый распространённый цикл — цикл for.

Выглядит он так:
```javascript
let i = 0;
for (начало; условие; шаг) {
  // ... тело цикла ...
}
```

Давайте разберёмся, что означает каждая часть, на примере. Цикл ниже выполняет alert(i) для i от 0 до (но не включая) 3:
```javascript
for (let i = 0; i < 3; i++) { // выведет 0, затем 1, затем 2
  alert(i);
}
```
Рассмотрим конструкцию for подробней:

|часть| | |
|-----|-|-|
|начало |```let i = 0```|Выполняется один раз при входе в цикл
|условие|```i < 3```|Проверяется перед каждой итерацией цикла.<br>Если оно вычислится в false, цикл остановится.
|тело   |```alert(i)```|Выполняется снова и снова, пока условие вычисляется в true.
|шаг    |```i++```| Выполняется после тела цикла на каждой итерации перед проверкой условия.

В целом, алгоритм работы цикла выглядит следующим образом:
```
Выполнить начало
→ (Если условие == true → Выполнить тело, Выполнить шаг)
→ (Если условие == true → Выполнить тело, Выполнить шаг)
→ (Если условие == true → Выполнить тело, Выполнить шаг)
→ ...
```

### Прерывание цикла: «break

Обычно цикл завершается при вычислении условия в false.

Но мы можем выйти из цикла в любой момент с помощью специальной директивы break.

Например, следующий код подсчитывает сумму вводимых чисел до тех пор, пока посетитель их вводит, а затем – выдаёт:

```javascript
let sum = 0;

while (true) {

  let value = +prompt("Введите число", '');

  if (!value) break; // (*)

  sum += value;

}
alert( 'Сумма: ' + sum );
```

Директива break в строке (*) полностью прекращает выполнение цикла и передаёт управление на строку за его телом, то есть на alert.

Вообще, сочетание «бесконечный цикл + break» – отличная штука для тех ситуаций, когда условие, по которому нужно прерваться, находится не в начале или конце цикла, а посередине или даже в нескольких местах его тела.

### Переход к следующей итерации: continue

Директива continue – «облегчённая версия» break. При её выполнении цикл не прерывается, а переходит к следующей итерации (если условие все ещё равно true).

Её используют, если понятно, что на текущем повторе цикла делать больше нечего.

Например, цикл ниже использует continue, чтобы выводить только нечётные значения:



```javascript
for (let i = 0; i < 10; i++) {

  // если true, пропустить оставшуюся часть тела цикла
  if (i % 2 == 0) continue;

  alert(i); // 1, затем 3, 5, 7, 9
}
```
Для чётных значений i, директива continue прекращает выполнение тела цикла и передаёт управление на следующую итерацию for (со следующим числом). Таким образом alert вызывается только для нечётных значений.

### Метки для break/continue

Бывает, нужно выйти одновременно из нескольких уровней цикла сразу.

Например, в коде ниже мы проходимся циклами по i и j, запрашивая с помощью prompt координаты (i, j) с (0,0) до (2,2):
```javascript
for (let i = 0; i < 3; i++) {

  for (let j = 0; j < 3; j++) {

    let input = prompt(`Значение на координатах (${i},${j})`, '');

    // Что если мы захотим перейти к Готово (ниже) прямо отсюда?
  }
}

alert('Готово!');
```
Нам нужен способ остановить выполнение, если пользователь отменит ввод.

Обычный ```break``` после ```input``` лишь прервёт внутренний цикл, но этого недостаточно. Достичь желаемого поведения можно с помощью меток.

Метка имеет вид идентификатора с двоеточием перед циклом:

```javascript
labelName: for (...) {
  ...
}
```
Вызов ```break <labelName>```в цикле ниже ищет ближайший внешний цикл с такой меткой и переходит в его конец.
```javascript
outer: for (let i = 0; i < 3; i++) {

  for (let j = 0; j < 3; j++) {

    let input = prompt(`Значение на координатах (${i},${j})`, '');

    // если пустая строка или Отмена, то выйти из обоих циклов
    if (!input) break outer; // (*)

    // сделать что-нибудь со значениями...
  }
}

alert('Готово!');

```
В примере выше это означает, что вызовом ```break outer```  будет разорван внешний цикл до метки с именем ```outer```.

Таким образом управление перейдёт со строки, помеченной ```(*)```, к ```alert('Готово!')```.

### Итого
Мы рассмотрели 3 вида циклов:

- ```while``` – Проверяет условие перед каждой итерацией.
- ```do..while``` – Проверяет условие после каждой итерации.
- ```for (;;)``` – Проверяет условие перед каждой итерацией, есть возможность задать дополнительные настройки.
Чтобы организовать бесконечный цикл, используют конструкцию ```while (true)```. При этом он, как и любой другой цикл, может быть прерван директивой ```break```.

Если на данной итерации цикла делать больше ничего не надо, но полностью прекращать цикл не следует – используют директиву ```continue```.

Обе этих директивы поддерживают метки, которые ставятся перед циклом. Метки – единственный способ для ```break/continue``` выйти за пределы текущего цикла, повлиять на выполнение внешнего.

Заметим, что метки не позволяют прыгнуть в произвольное место кода, в JavaScript нет такой возможности.



[домой]: ../../README.md 'Вернуться на начальную страницу'